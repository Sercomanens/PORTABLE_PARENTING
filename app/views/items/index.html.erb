<div class="container my-5">
  <h1 class="mb-4">Items</h1>
  <div class="mb-3">
    <%= form_with url: items_path, method: :get, local: true do |form| %>
      <div class="input-group">
        <%= form.label :category, "Filter by Category", class: "input-group-text" %>
        <%= form.select :category, options_for_select(@categories.unshift("All"), params[:category]), { include_blank: 'All' }, class: "form-select" %>
        <div class="input-group-append">
          <%= form.submit 'Filter', class: "btn teal_button" %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="row">
    <% @items.each do |item| %>
      <div class="col-md-4 mb-4">
        <div class="card" style="width: 18rem;">
          <% if item.photos.attached? %>
            <%= cl_image_tag item.photos.first.key, height: 300, crop: :fill, class: "card-img-top", alt: "Card image cap" %>
          <% else %>
            <img class="card-img-top" src="<%= asset_path('placeholder.jpg') %>" alt="Card image cap">
          <% end %>
          <div class="card-body">
            <h5 class="card-title"><%= item.name %></h5>
            <p class="card-text"><%= item.description %></p>
            <p class="card-text"><%= number_to_currency(item.price) %></p>
            <p class="card-text"><strong>Category:</strong> <%= item.category %></p>
            <% unless current_user == item.user %>
              <%= link_to 'Rent', item_path(item), class: "btn crimson_button" %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  <%= link_to "Home page", root_path, class: 'teal_button' %>
</div>
